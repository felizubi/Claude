!function(n){var i={};function o(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=n,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,n){n(1),n(2),n(3),n(4),t.exports=n(5)},function(t,e){angular.module("widgetkit",["Application","ngResource","ngTouch","Fields"]).value("name","widgetkit").value("UIkit",window.UIkit2||window.UIkit2wk).factory("Content",["$resource","Application",function(t,e){return t(e.url("/content/:id"),{},{query:{method:"GET",responseType:"json"},save:{method:"POST",responseType:"json"}})}]).filter("supported",["Application",function(i){return function(t,n){return n?t.filter(function(t){var e=i.config.types[t.type];return n.item.filter(function(t){if(-1!==e.item.indexOf(t))return!0}).length==n.item.length}):t}}]).filter("ucwords",["Application",function(t){return function(t){return t.replace(/(-|_)/g," ").replace(/^([a-z\u00E0-\u00FC])|\s+([a-z\u00E0-\u00FC])/g,function(t){return t.toUpperCase()})}}]).service("mediaInfo",["Application","$q",function(l,c){return function(t,e){var n,i,o={url:t=t||"",type:"",src:t&&!t.match(/^(https?:)?\//)?l.baseUrl()+"/"+t:t,provider:null,image:l.config.images.placeholder,width:null,height:null};if(t.match(/\.(jpe?g|png|gif|svg)$/i)?(o.type="image",o.image=o.src):t.match(/\.(mp3|ogg|wav)$/)?(o.type="audio",o.image=l.config.images.audio):t.match(/\.(mp4|ogv|webm)$/)?(o.type="video",o.image=l.config.images.video):(n=/(\/\/.*?)vimeo\.[a-z]+\/(?:\w*\/)*(\d+)/i.exec(t))?(o.provider="vimeo",o.type="iframe",o.src="//player.vimeo.com/video/"+n[2],o.image=l.config.images.iframe):((n=/(\/\/.*?youtube\.[a-z]+)\/watch\?v=([^&]+)(.*)/i.exec(t))||(n=/(\/\/.*?youtu\.be)\/([^\?]+)(.*)/i.exec(t)))&&(o.provider="youtube",o.type="iframe",o.src="//www.youtube.com/embed/"+n[2]+n[3].replace(/^&/,"?"),o.image="//img.youtube.com/vi/"+n[2]+"/hqdefault.jpg"),e)switch(i=c.defer(),o.type){case"image":var a=new Image;a.onerror=function(){i.resolve(o)},a.onload=function(){o.width=a.width,o.height=a.height,i.resolve(o)},a.src=o.src;break;case"video":var r=angular.element('<video style="position:fixed;visibility:hidden;top:-10000px;"></video>').attr("src",o.src).appendTo("body"),s=setInterval(function(){r[0].videoWidth&&(clearInterval(s),o.width=r[0].videoWidth,o.height=r[0].videoHeight,r.remove(),i.resolve(o))},20);break;case"iframe":"vimeo"==o.provider&&jQuery.ajax({type:"GET",url:"//vimeo.com/api/oembed.json?url="+encodeURI(o.url),jsonp:"callback",dataType:"jsonp",success:function(t){o.width=t.width,o.height=t.height,i.resolve(o)}}).fail(function(){i.resolve(o)}),"youtube"==o.provider&&jQuery.ajax({type:"GET",url:"//query.yahooapis.com/v1/public/yql",data:{q:"select * from json where url ='http://www.youtube.com/oembed?url="+encodeURI(o.url)+"'",format:"json"},dataType:"jsonp",success:function(t){if(t&&t.query&&t.query.results&&t.query.results.json){var e=jQuery(t.query.results.json.html);o.width=e.attr("width"),o.height=e.attr("height")}i.resolve(o)}}).fail(function(){i.resolve(o)});break;default:i.resolve(o)}return e?i.promise:o}}]).factory("httpInterceptor",["$q","UIkit",function(n,i){return{responseError:function(t){var e;return e=t.data&&t.data.message?t.data.message:t.statusText,i.notify(e,"danger"),n.reject(t)}}}]).config(["$httpProvider","$sceProvider",function(t,e){t.interceptors.push("httpInterceptor"),e.enabled(!1)}]),document.addEventListener("DOMContentLoaded",function(){jQuery("body").on("show.uk.modal",function(t){var e=jQuery(t.target);e.hasClass("uk-modal")&&e.data("modal")&&e.addClass("wk-noconflict")})})},function(t,e){var s,a;s=function(e,n){(n=n||e).widgets=[],e.data&&e.data.widgets&&(e.search=sessionStorage["widgetkit.widgets.filter"]?JSON.parse(sessionStorage["widgetkit.widgets.filter"]):{name:"",data:{_widget:{name:""}}},e.$watch("search",function(){sessionStorage["widgetkit.widgets.filter"]=JSON.stringify(angular.copy(e.search))}),n.widgets.push({name:"",label:Translator?Translator.trans("All"):"All"}),Object.keys(e.data.widgets).forEach(function(t){n.widgets.push(e.data.widgets[t])}))},a=function(a,t,n,e){var r=this,i=window.localStorage||{};r.viewmode=i["wk.content.viewmode"]||"list",r.include="",s(a,r),r.previewContent=function(t){return a.$emit("wk.preview.content",t).preview||a.data.types[t.type].icon},r.createContent=function(t){a.content=t||{name:"",type:"",data:{_widget:{}}},a.widget=null,r.setView("contentConfig")},r.editContent=function(t,e){var n,i=null,o=a.data.widgets;n=(t=angular.copy(t)).data._widget,t.id||(angular.extend(t.data,a.data.types[t.type].data),t.id="new"),o[n.name]?((i=angular.copy(o[n.name])).data=n.data=angular.extend({},i.settings,n.data),a.content=t,a.widget=i,r.setView("contentEdit",e)):r.createContent(t)},r.saveContent=function(){return"new"==a.content.id&&delete a.content.id,e.save({id:a.content.id},{content:a.content},function(t){r.editContent(a.data.content[t.id]=t),n.notify(t.name+" saved.","success")})},r.copyContent=function(t){return(t=angular.copy(t)).id="",t.name+=" (copy)",e.save({id:t.id},{content:t},function(t){(a.data.content[t.id]=t).data._widget=angular.isArray(t.data._widget)?{}:t.data._widget,n.notify(t.name+" copied.","success")})},r.deleteContent=function(t){confirm("Are you sure?")&&e.delete({id:t.id},function(){delete a.data.content[t.id]})},r.getWidget=function(t){return a.data.widgets[t.data._widget.name]},r.selectWidget=function(t){var e=a.content.data;e._widget.name!=t.name&&(e._widget.name=t.name,e._widget.data={})},r.setView=function(t,e){r.view=t,e&&(r.include=e),a.$emit("wk.change.view",t),n.init('[data-app="widgetkit"]')},r.setViewMode=function(t){r.viewmode=i["wk.content.viewmode"]=t},r.setView("content")},angular.module("widgetkit").controller("contentCtrl",["$scope","Application","UIkit","Content",function(t,e,n,i){t.data=angular.extend({content:i.query(function(t){angular.forEach(t,function(t,e){"$"!==e[0]&&(t.data=angular.extend({_widget:{}},t.data),t.data._widget=angular.isArray(t.data._widget)?{}:t.data._widget)})})},e.config),this.name="contentCtrl",a.call(this,t,e,n,i)}]).controller("pickerCtrl",["$scope","Application","Content","UIkit",function(n,i,t,e){var o=this;n.data=angular.extend({},i.config),n.data.content=t.query(function(t){angular.forEach(t,function(t,e){"$"!==e[0]&&(t.data=angular.extend({_widget:{}},t.data),t.data._widget=angular.isArray(t.data._widget)?{}:t.data._widget)});var e=n.data.content[i.env.attrs.id];e&&"editor"==o.mode&&(o.editContent(e,"content"),o.mode="edit"),i.env.modal.show()}),o.name="pickerCtrl",o.mode=i.env.mode,s(n,o),o.active=function(t){return t.id==i.env.attrs.id},o.update=function(t){i.env.update({id:t.id,name:t.name})},o.cancel=function(){i.env.cancel()},a.call(this,n,i,e,t)}])},function(t,e){angular.module("widgetkit").directive("mediaPreview",["mediaInfo",function(e){return{restrict:"E",scope:{src:"@"},controller:["$scope",function(t){this.type=function(){return t.media=e(t.src),t.media.type},this.cleanUrl=function(t){return"string"==typeof t&&(t=t.replace("autoplay=1","autoplay=0")),t}}],controllerAs:"vm",template:'<div ng-switch="vm.type()">                           <audio ng-switch-when="audio" ng-src="{{ media.src }}" controls="true" class="uk-responsive-width"></audio>                           <video ng-switch-when="video" ng-src="{{ media.src }}" controls="true" class="uk-responsive-width"></video>                           <iframe ng-switch-when="iframe" ng-src="{{ vm.cleanUrl(media.src) }}" frameborder="0" allowfullscreen="true" class="uk-responsive-width" width="800" height="600"></iframe>                           <img ng-switch-default ng-src="{{ media.src }}">                       </div>'}}]).directive("autofocus",["$timeout",function(n){var i=[];return{restrict:"A",link:function(t,e){i.push(e),n(function(){i[0][0].focus()})}}}])},function(t,e){function s(t){var o=g.tinymce.editors[t.attr("id")];return{getContent:function(){return o.getContent()},insertContent:function(t){o.execCommand("mceInsertContent",!1,t)},updateContent:function(t,e,n){var i=this.getContent();i=i.substring(0,e)+t+'<span id="tmp-wkid"></span>'+i.substring(n),o.setContent(i),o.selection.select(o.dom.select("#tmp-wkid")[0],!0),o.selection.collapse(!1),o.dom.remove("tmp-wkid",!1),o.focus()},getCursorPosition:function(){var t=o.selection.getBookmark(0),e=o.dom.select("[data-mce-type=bookmark]");o.selection.select(e[0]),o.selection.collapse(),o.selection.setContent('<span id="######cursor######"></span>');var n=o.getContent({format:"html"}).indexOf('<span id="######cursor######"></span>');return o.dom.remove("######cursor######",!1),o.selection.moveToBookmark(t),n}}}function l(a){return{getContent:function(){return a.val()},insertContent:function(t){this.updateContent(t,a.prop("selectionStart"),a.prop("selectionEnd"))},updateContent:function(t,e,n){var i=a.val(),o=e+t.length;i=i.substring(0,e)+t+i.substring(n),a.val(i),a[0].setSelectionRange(o,o),a.focus().trigger("change")},getCursorPosition:function(){return a.prop("selectionStart")}}}function c(t){var i=t.next()[0].CodeMirror;return{getContent:function(){return i.getValue()},insertContent:function(t){i.replaceRange(t,i.getCursor()),i.focus()},updateContent:function(t,e,n){i.replaceRange(t,this.translateOffset(e),this.translateOffset(n)),i.focus()},getCursorPosition:function(){return this.translatePosition(i.getCursor())},translatePosition:function(t){return i.getValue().split("\n",t.line).join("").length+t.line+t.ch},translateOffset:function(t){var e=i.getValue().substring(0,t).split("\n");return{line:e.length-1,ch:e[e.length-1].length}}}}function d(t){var o=g.ace.edit(t.parent().attr("id"));return{getContent:function(){return o.getValue()},insertContent:function(t){o.insert(t),o.focus()},updateContent:function(t,e,n){e=this.translateOffset(e),n=this.translateOffset(n);var i=o.getSelectionRange();i.setStart(e.row,e.column),i.setEnd(n.row,n.column),o.getSession().getDocument().replace(i,t),o.focus()},getCursorPosition:function(){return this.translatePosition(o.getSelection().getCursor())},translatePosition:function(t){return this.getContent().split("\n",t.row).join("").length+t.row+t.column},translateOffset:function(t){var e=this.getContent().substring(0,t).split("\n");return{row:e.length-1,column:e[e.length-1].length}}}}function u(t){var o=CKEDITOR.instances[t.attr("id")];return{getContent:function(){return o.getData()},insertContent:function(t){this.updateContent(t,this.getCursorPosition(),this.getCursorPosition())},updateContent:function(t,e,n){var i=o.getData();i=i.substring(0,e)+t+i.substring(n),o.setData(i)},getCursorPosition:function(){return"source"==o.mode?a(o.textarea.$).prop("selectionStart"):this.getCursorPositionInWYSIWYG()},getCursorPositionInWYSIWYG:function(){var t=o.getSelection().createBookmarks(),e='<span id="######cursor######">&nbsp;</span>',n=CKEDITOR.dom.element.createFromHtml(e);n.insertBefore(t[0].startNode);var i=this.getContent().indexOf(e);return n.remove(),o.getSelection().selectBookmarks(t),i}}}var a,g,o,n,p;a=jQuery,g=window,o=window.UIkit2||window.UIkit2wk,n={init:function(t,e,n){var i=a(this.tmpl).appendTo("body");this.mode=t,this.attrs=e,this.cb=n,this.modal=o.modal(i),this.modal.on("hide.uk.modal",function(){i.remove()}),o.domObserve(i,function(){var e=this;o.domObservers.forEach(function(t){t(e)})}),angular.bootstrap(i,["widgetkit"])},editor:function(t){for(var n,i,o,e=(n=new((g.WFEditor||g.JContentEditor||g.tinyMCE)&&!t.is(":visible")?s:g.CodeMirror&&t.next()[0]&&t.next()[0].CodeMirror?c:g.ace?d:g.CKEDITOR?u:l)(t)).getContent(),a=n.getCursorPosition(),r=/\[widgetkit([^\]]*)\]/gi;o=r.exec(e);)if(o.index<=a&&r.lastIndex>a){i=o[0];break}this.init("editor",p.parse("widgetkit",i).attrs,function(t){var e=new p({tag:"widgetkit",attrs:t}).string();i?n.updateContent(e,o.index,r.lastIndex):n.insertContent(e)})},update:function(t){this.cb(t),this.modal.hide()},cancel:function(){this.modal.hide()},tmpl:'<div class="uk-modal"><div style="width: 1000px;" class="uk-modal-dialog" ng-include="\'picker\'"></div></div>'},p=function(t){a.extend(this,{tag:"",attrs:{},type:"single",content:""},t)},a.extend(p,{parse:function(t,e){var n,i=this.regexp(t).exec(e),o={tag:t};return i&&(n=i[4]?"self-closing":i[6]?"closed":"single",o={tag:i[2],attrs:this.attrs(i[3]),type:n,content:i[5]}),new p(o)},attrs:function(t){var e,n=/(\w+)\s*=\s*"([^"]*)"(?:\s|$)|(\w+)\s*=\s*\'([^\']*)\'(?:\s|$)|(\w+)\s*=\s*([^\s\'"]+)(?:\s|$)|"([^"]*)"(?:\s|$)|(\S+)(?:\s|$)/g,i={};for(t=t.replace(/[\u00a0\u200b]/g," ");e=n.exec(t);)e[1]?i[e[1].toLowerCase()]=e[2]:e[3]?i[e[3].toLowerCase()]=e[4]:!e[5]||"true"!==e[6]&&"1"!==e[6]?!e[5]||"false"!==e[6]&&"0"!==e[6]?e[5]?i[e[5].toLowerCase()]=e[6]:e[7]?i[e[7]]=!0:e[8]&&(i[e[8]]=!0):i[e[5].toLowerCase()]=!1:i[e[5].toLowerCase()]=!0;return i},regexp:function(t){return new RegExp("\\[(\\[?)("+t+")(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)","g")}}),a.extend(p.prototype,{string:function(){var n="["+this.tag;return a.each(this.attrs,function(t,e){"boolean"==typeof e?n+=" "+t+"="+(e?1:0):""!==e&&(n+=" "+t+'="'+e+'"')}),"single"===this.type?n+"]":"self-closing"===this.type?n+" /]":(n+="]",this.content&&(n+=this.content),n+"[/"+this.tag+"]")}}),a(function(){a.extend(g.widgetkit,{env:n,shortcode:p})})},function(t,e){function u(t,e){var n=jQuery.Deferred(),i=document.createElement("script");return i.async=!0,i.onload=function(){n.resolve(),e&&e(i)},i.onerror=function(){n.reject(t)},i.src=t,document.getElementsByTagName("head")[0].appendChild(i),n.promise()}var g;g=window.UIkit2||window.UIkit2wk,angular.module("Fields",[]).directive("fieldMedia",["mediaPicker","mediaInfo",function(t,n){var i={};return{scope:{media:"=",options:"=?",title:"=?"},restrict:"E",controller:["$scope",function(e){this.selectMedia=function(){t.select().then(function(t){e.media=t.url,e.height=t.height,e.width=t.width,e.title||(e.title=String(t.title).replace(/(-|_)/g," ").replace(/^([a-z\u00E0-\u00FC])|\s+([a-z\u00E0-\u00FC])/g,function(t){return t.toUpperCase()}))})},this.selectPoster=function(){t.select().then(function(t){e.options||(e.options={}),e.options.poster=t.url})},this.isVideo=function(t){return!(!t||!(t.match(/\.(mp4|ogv|webm)$/)||t.match(/(\/\/.*?)vimeo\.[a-z]+\/(?:\w*\/)*(\d+)/i)||t.match(/(\/\/.*?youtube\.[a-z]+)\/watch\?v=([^&]+)(.*)/i)||t.match(/(\/\/.*?youtu\.be)\/([^\?]+)(.*)/i)))},e.$watch("media",function(){if(e.options&&!angular.isArray(e.options)||(e.options={}),i[e.media])return e.options.width=i[e.media].width,void(e.options.height=i[e.media].height);n(e.media,!0).then(function(t){e.height="",e.width="",0<Object.keys(i).length&&e.options.iframe&&!i[e.media]&&(e.options.iframe.width="",e.options.iframe.height=""),t.type&&(e.options.width=t.width,e.options.height=t.height,e.options.type=t.type,i[e.media]=t)})},!0),e.$watch("options.iframe",function(){e.options.iframe&&(e.options.width=e.options.iframe.width,e.options.height=e.options.iframe.height)},!0)}],controllerAs:"vm",template:'<div>                                  <div class="uk-flex">                                      <div class="uk-form-icon uk-flex-item-1 uk-margin-small-right">                                          <i class="uk-icon-photo"></i><input class="uk-width-1-1" ng-model="media">                                      </div>                                      <button class="uk-button" ng-click="vm.selectMedia()">Select</button>                                  </div>                                  <div class="uk-grid uk-margin-top">                                      <div class="uk-width-small-1-2">                                          <div class="uk-overlay">                                              <media-preview src="{{ media }}"></media-preview>                                              <div class="uk-overlay-panel uk-overlay-bottom uk-panel uk-panel-box" ng-show="options.type === \'iframe\'">                                                  <div class="uk-grid uk-grid-small uk-grid-width-1-3 uk-margin-small-top">                                                      <div class="uk-form-icon"><i class="uk-icon-arrows-h"></i><input class="uk-width-1-1" type="text" title="Width" ng-model="options.iframe.width" placeholder="width"></div>                                                      <div class="uk-form-icon"><i class="uk-icon-arrows-v"></i><input class="uk-width-1-1" type="text" title="Height" ng-model="options.iframe.height" placeholder="height"></div>                                                  </div>                                              </div>                                          </div>                                      </div>                                      <div class="uk-width-small-1-2" ng-show="vm.isVideo(media)">                                          <div class="uk-margin-small-bottom" ng-show="options.poster"><media-preview src="{{ options.poster }}"></media-preview></div>                                          <a ng-click="vm.selectPoster()">Select Poster</button>                                          <a class="uk-margin-small-left" ng-show="options.poster" ng-click="(options.poster = \'\')">Reset</a>                                      </div>                                  </div>                               </div>'}}]).directive("fieldWysiwygeditor",["$timeout","mediaPicker","mediaInfo",function(n,u,t){return{restrict:"EA",require:"?ngModel",template:'<div><textarea name="wk_{{id}}" id="wk_{{id}}"></textarea></div>',link:function(s,t,e,l){if(window.tinyMCE){s.id=String(Math.ceil(1e3*Math.random()));var c=jQuery,d="wk_"+s.id;n(function(){var t,e,n=window.tinyMCE||window.WFEditor;window.WFEditor&&c("#"+d).after('<input type="hidden" id="wf_'+s.id+'_token" value="'+Math.random()+'">'),"object"==typeof Joomla&&(e=Joomla.getOptions&&Joomla.getOptions("plg_editor_tinymce",{}));var i=e&&e.tinyMCE&&e.tinyMCE.default.toolbar1||n.settings&&n.settings.toolbar1||"",o=e&&e.tinyMCE&&e.tinyMCE.default.toolbar2||n.settings&&n.settings.toolbar2||"",a=e&&e.tinyMCE&&e.tinyMCE.default.plugins||n.settings&&n.settings.plugins||"";!window.wp||i&&o&&a||(a=a||"charmap,colorpicker,hr,lists,media,paste,tabfocus,textcolor,fullscreen,wordpress,wpautoresize,wpeditimage,wpemoji,wpgallery,wplink,wpdialogs,wptextpattern,wpview",i=i||"bold,italic,strikethrough,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,link,unlink,wp_more,spellchecker,dfw,wp_adv",o=o||"formatselect,underline,alignjustify,forecolor,pastetext,removeformat,charmap,outdent,indent,undo,redo,wp_help"),-1==i.indexOf("wk_media")&&(i+=" wk_media"),window.wp||window.WFEditor||-1!=i.indexOf("button-2Article")||(i+=" button-2Article"),window.wp||window.WFEditor||-1!=a.indexOf("jArticleButton")||(a+=" jArticleButton"),t=c.extend({},e&&e.tinyMCE&&e.tinyMCE.default||n.settings,{menubar:!1,plugins:a,toolbar1:i,toolbar2:o,width:"100%",height:500,relative_urls:e&&e.tinyMCE&&e.tinyMCE.default.relative_urls||n.settings&&n.settings.relative_urls||!1,setup:function(a){a.addButton("wk_media",{text:"",icon:"image",onclick:function(){window.wp?u.select({editor:d}):u.select().then(function(t){var e=t.href,n=t.title,i=t.width,o=t.height;a.insertContent('<img src="'+e+'" alt="'+n+'" data-mce-src="'+e+'" width="'+i+'" height="'+o+'"></img>')})}}),4==tinyMCE.majorVersion?(a.on("change",function(){l.$setViewValue(tinyMCE.get(d).getContent())}),a.on("input",function(){l.$setViewValue(tinyMCE.get(d).getContent())}),a.on("init",function(){a.setContent(l.$viewValue||"")})):(a.onChange.add(function(){l.$setViewValue(tinyMCE.get(d).getContent())}),a.onKeyUp.add(function(){l.$setViewValue(tinyMCE.get(d).getContent())}),a.onInit.add(function(){a.setContent(l.$viewValue||"")}))}});var r=new tinyMCE.Editor(d,t,tinyMCE.EditorManager);r.render(),l.$render=function(){try{r.setContent(l.$viewValue||""),c("#"+d).val(l.$viewValue||"")}catch(t){}},l.$render()})}}}}]).directive("fieldHtmleditor",["$timeout","$q",function(s,t){var e;return{restrict:"EA",require:"?ngModel",link:function(i,o,a,r){e||(e=jQuery.Deferred(),u(widgetkit.config.adminBase+"/assets/lib/codemirror/codemirror.js").then(function(){u(widgetkit.config.adminBase+"/vendor/assets/uikit/js/components/htmleditor.min.js").then(function(){e.resolve()})})),e.promise().then(function(){var t,e=jQuery("<textarea></textarea>"),n={mdparser:function(){}};n=jQuery.extend(!0,{},n,i.$eval(a.options)),o.after(e).hide(),s(function(){r.$render=function(){e.data("htmleditor")&&e.data("htmleditor").editor.setValue(r.$viewValue||"")},setTimeout(function(){(t=g.htmleditor(e,n)).editor.on("change",g.Utils.debounce(function(){r.$setViewValue(t.editor.getValue()),i.$root.$$phase||i.$apply()},50)),t.fit(),r.$render()})})})}}}]).directive("fieldLocation",["$timeout","$q",function(n,e){var i,o,d=0;return{restrict:"EA",require:"?ngModel",scope:{latlng:"@"},replace:!0,template:'<div>                                    <div class="uk-alert uk-margin-small-bottom" ng-if="!APIKEY">Please add your custom Google Maps API Key in the <a href="'+widgetkit.config.settingsPage+'">Widgetkit settings</a>!</div>                                    <div class="uk-grid uk-grid-small">                                         <div class="uk-form uk-form-icon uk-margin-small-bottom uk-width-3-5">                                            <i class="uk-icon-search"></i><input class="uk-width-1-1">                                        </div>                                        <div class="uk-form uk-form-horizontal uk-margin-small-bottom uk-width-2-5">                                            <input class="uk-width-1-1" type="text" placeholder="Custom marker: URL or #000" ng-model="latlng.marker">                                        </div>                                    </div>                                    <div class="js-map" style="min-height:300px;">                                     Loading map...                                     </div>                                     <div class="uk-text-small uk-margin-small-top">LAT: <span class="uk-text-muted">{{ latlng.lat }}</span> LNG: <span class="uk-text-muted">{{ latlng.lng }}</span> <span ng-if="latlng.place">PLACE: <span class="uk-text-muted">{{ latlng.place.name }}</span></span></div>                                </div>',link:function(a,r,t,s){var l;function c(t){var e=jQuery.extend({lat:l.getPosition().lat(),lng:l.getPosition().lng(),marker:"",place:!1},s.$viewValue,t);s.$setViewValue(e),a.latlng=e,n(function(){a.$apply()})}i||(i=jQuery.Deferred(),u(widgetkit.config.adminBase+"/plugins/widgets/map/assets/marker-helper.js").then(function(){i.resolve()})),i.promise().then(function(){(function(){if(!o){o=e.defer();var t=document.createElement("script");t.async=!0,t.onload=function(){google.load("maps","3",{other_params:"libraries=places&key="+(window.GOOGLE_MAPS_API_KEY||""),callback:function(){google&&google.maps.places&&o.resolve()}})},t.onerror=function(){alert("Failed loading google maps api.")},t.src="https://www.google.com/jsapi",document.getElementsByTagName("head")[0].appendChild(t)}return o.promise})().then(function(){n(function(){var n,i,o,t="wk-location-"+ ++d,e=new google.maps.LatLng(53.55909862554551,9.998652343749995);a.latlng=s.$viewValue||{lat:e.lat(),lng:e.lng(),marker:"",place:!1},void 0===a.latlng.marker&&(a.latlng.marker=""),r.find(".js-map").attr("id",t),n=new google.maps.Map(document.getElementById(t),{zoom:6,center:e}),l=new google.maps.Marker({position:e,map:n,draggable:!0}),MapsMarkerHelper.setIcon(l,a.latlng.marker),google.maps.event.addListener(l,"dragend",function(){var t=l.getPosition();c({lat:t.lat(),lng:t.lng(),place:!1}),i.value=""}),g.$win.on("resize",function(){google.maps.event.trigger(n,"resize"),n.setCenter(l.getPosition())}),i=r.find("input")[0],(o=new google.maps.places.Autocomplete(i)).bindTo("bounds",n),google.maps.event.addListener(o,"place_changed",function(){var t=o.getPlace();if(t.geometry){t.geometry.viewport?n.fitBounds(t.geometry.viewport):n.setCenter(t.geometry.location),l.setPosition(t.geometry.location),i.value="";var e=l.getPosition();c({lat:e.lat(),lng:e.lng(),place:t})}}),google.maps.event.addDomListener(i,"keydown",function(t){13==t.keyCode&&t.preventDefault()}),a.$watch("latlng.marker",function(t){t&&c({marker:t}),MapsMarkerHelper.setIcon(l,t)}),s.$render=function(){try{if(s.$viewValue&&s.$viewValue.lat&&s.$viewValue.lng){var t=new google.maps.LatLng(s.$viewValue.lat,s.$viewValue.lng);l.setPosition(t),n.setCenter(t),s.$viewValue.marker!==a.latlng.marker&&c({marker:s.$viewValue.marker}),MapsMarkerHelper.setIcon(l,latlng.marker)}else c({lat:l.getPosition().lat(),lng:l.getPosition().lng(),marker:"",place:!1})}catch(t){}},s.$render()})})}),a.APIKEY=window.GOOGLE_MAPS_API_KEY||""}}}]).directive("fieldPathpicker",["mediaPicker","mediaInfo",function(t,e){return{scope:{path:"="},restrict:"E",controller:["$scope",function(e){this.selectPath=function(){filetypes=/\.*$/i,t.select({allowedFiletypes:filetypes}).then(function(t){e.path=t.url})},e.$watch("path",function(t){e.path=t},!0)}],controllerAs:"vm",template:'<div>                                  <div class="uk-flex">                                      <div class="uk-form-icon uk-flex-item-1 uk-margin-small-right">                                        <i class="uk-icon-paperclip"></i><input class="uk-width-1-1" ng-model="path">                                      </div>                                      <button class="uk-button" ng-click="vm.selectPath()">Select</button>                                  </div>                               </div>'}}]).directive("fieldDate",["$timeout","$q",function(o,t){var a;return{restrict:"E",require:"?ngModel",scope:{date:"@"},template:'<div class="uk-form-icon">                                  <i class="uk-icon-calendar"></i>                                  <input type="text" ng-model="date" data-uk-datepicker="{container: \'.wk-noconflict\'}">                               </div>',link:function(n,t,e,i){a||(a=jQuery.Deferred(),u(widgetkit.config.adminBase+"/vendor/assets/uikit/js/components/datepicker.min.js").then(function(){a.resolve()})),a.promise().then(function(){function e(t){i.$setViewValue(t),n.date=t,o(function(){n.$apply()})}n.date=i.$viewValue||"",n.$watch("date",function(t){e(t)}),i.$render=function(){try{e(i.$viewValue)}catch(t){}},i.$render()}),window.MooTools&&(t.find("input")[0].hide=function(){return!1})}}}]).factory("Fields",function(){var n={text:{label:"Text",template:function(t,e){var n=angular.element('<input class="uk-width-1-1" type="text"  ng-model="'+t+'">').attr(e.attributes||{});return e&&e.icon&&(n=n.wrap('<div class="uk-form-icon uk-width-1-1"></div>').before('<i class="uk-icon-'+e.icon+'"></i>').parent()),n}},textarea:{label:"Textarea",template:function(t,e){return angular.element('<textarea id="wk-content" class="uk-width-1-1" ng-model="'+t+'" rows="10"></textarea>').attr(e.attributes||{})}},editor:{label:"Editor",template:function(t,e){var n=window.tinyMCE&&window.WK_SYSTEM_EDITOR?"wysiwygeditor":"htmleditor";return angular.element("<field-"+n+' class="uk-width-1-1" ng-model="'+t+'" rows="10"></field-'+n+">")}},htmleditor:{label:"HTML Editor",template:function(t,e){return angular.element('<field-htmleditor class="uk-width-1-1" ng-model="'+t+'" rows="10"></field-htmleditor>')}},tags:{label:"Tags",template:function(t,e){return angular.element('<div class="uk-form-icon uk-width-1-1"><i class="uk-icon-tags"></i><input class="uk-width-1-1" type="text" ng-list ng-model="'+t+'" placeholder="tag, tag, ..."></div><div>').find("input").attr(e.attributes||{}).parent()}},boolean:{label:"Boolean",template:function(t,e){return angular.element('<input type="checkbox" ng-model="'+t+'">').attr(e.attributes||{})}},media:{label:"Media",template:function(t,e){return'<field-media media="'+t+'"></field-media>'}},pathpicker:{label:"Pathpicker",template:function(t,e){return'<field-pathpicker path="'+t+'"></field-pathpicker>'}},location:{label:"Location",template:function(t,e){return'<field-location  ng-model="'+t+'"></field-location>'}},date:{label:"Date",template:function(t,e){return'<field-date ng-model="'+t+'"></field-date>'}}};return{register:function(t,e){n[t]=angular.extend({label:t,assets:[],template:function(){}},e)},exists:function(t){return!!n[t]},get:function(t){return n[t]},fields:function(){var e=[];return Object.keys(n).forEach(function(t){e.push({name:t,label:n[t].label})}),e}}}).directive("field",["$timeout","$compile","Fields",function(e,r,s){return{require:"?ngModel",restrict:"E",link:function(i,o,a,t){e(function(){var t,e=angular.extend({},JSON.parse(a.options||"{}")),n=a.type||"text";s.exists(n)?(t=s.get(n).template(a.ngModel,e)).then?t.then(function(t){r(o.html(t).contents())(i)}):r(o.html(t).contents())(i):r(o.html(s.get("text").template(a.ngModel)).contents())(i)})}}}])}]);